import{c as Ce,d as m,u as ue,w as de,v as ce,a as e,b as p,n as y,e as b,i as fe,o as r,f as R,S as O,g as c,x as Te,m as C,h as t,r as $,O as N,j as Be,E as ze,k as s,X as Se,D as Ee,P as Le,l as Pe,_ as I,F as L,p as U,q as Ie,s as V,t as u,y as h,z as G,A as je,B as Ue,C as Oe,G as A,H as D,I as Ne,J as Ae,K as De,U as Me,Y as qe,L as Fe,M as Ge,R as He,N as Ye,T as Ke,Q as k,V as Ze,W as B,Z as pe,$ as Je,a0 as Qe,a1 as me,a2 as _e,a3 as We,a4 as Xe,a5 as z,a6 as S,a7 as T,a8 as M,a9 as E,aa as es,ab as K,ac as ss,ad as ge,ae as ve,af as J,ag as ee,ah as ts,ai as Q,aj as se,ak as te,al as as}from"./index-CPwGU_gL.js";import{_ as ls,a as ns,b as os,c as rs,d as xe,e as is,u as ye,f as ae,g as us,D as ds,h as X,i as H,j as be,k as he,l as le}from"./component.vue_vue_type_script_setup_true_lang-DabyMLtZ.js";/**
 * @license lucide-vue-next v0.451.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=Ce("GripVerticalIcon",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var q=(n=>(n.PRESET="preset",n.LOCAL="local",n.REMOTE="remote",n))(q||{});const ne=[{label:"预设规则",value:"preset"},{label:"本地加载",value:"local"},{label:"远程链接",value:"remote"}],W=m({__name:"Input",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(n,{emit:l}){const a=n,i=ue(a,"modelValue",l,{passive:!0,defaultValue:a.defaultValue});return(o,f)=>de((r(),p("input",{"onUpdate:modelValue":f[0]||(f[0]=v=>fe(i)?i.value=v:null),class:y(e(b)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a.class))},null,2)),[[ce,e(i)]])}}),fs=m({__name:"Textarea",props:{class:{},defaultValue:{},modelValue:{}},emits:["update:modelValue"],setup(n,{emit:l}){const a=n,i=ue(a,"modelValue",l,{passive:!0,defaultValue:a.defaultValue});return(o,f)=>de((r(),p("textarea",{"onUpdate:modelValue":f[0]||(f[0]=v=>fe(i)?i.value=v:null),class:y(e(b)("flex min-h-14 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a.class))},null,2)),[[ce,e(i)]])}}),ps=m({__name:"TagsInput",props:{modelValue:{},defaultValue:{},addOnPaste:{type:Boolean},addOnTab:{type:Boolean},addOnBlur:{type:Boolean},duplicate:{type:Boolean},disabled:{type:Boolean},delimiter:{},dir:{},max:{},required:{type:Boolean},name:{},id:{},convertValue:{type:Function},displayValue:{type:Function},asChild:{type:Boolean},as:{},class:{}},emits:["update:modelValue","invalid"],setup(n,{emit:l}){const a=n,d=l,i=R(()=>{const{class:f,...v}=a;return v}),o=O(i,d);return(f,v)=>(r(),c(e(Te),C(e(o),{class:e(b)("flex flex-wrap gap-2 items-center rounded-md border border-input bg-background px-3 py-2 text-sm",a.class)}),{default:t(()=>[$(f.$slots,"default")]),_:3},16,["class"]))}}),ms=m({__name:"TagsInputInput",props:{placeholder:{},autoFocus:{type:Boolean},maxLength:{},asChild:{type:Boolean},as:{},class:{}},setup(n){const l=n,a=R(()=>{const{class:i,...o}=l;return o}),d=N(a);return(i,o)=>(r(),c(e(Be),C(e(d),{class:e(b)("text-sm min-h-6 focus:outline-none flex-1 bg-transparent px-1",l.class)}),null,16,["class"]))}}),_s=m({__name:"TagsInputItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const l=n,a=R(()=>{const{class:i,...o}=l;return o}),d=N(a);return(i,o)=>(r(),c(e(ze),C(e(d),{class:e(b)("flex h-6 items-center rounded bg-secondary data-[state=active]:ring-ring data-[state=active]:ring-2 data-[state=active]:ring-offset-2 ring-offset-background",l.class)}),{default:t(()=>[$(i.$slots,"default")]),_:3},16,["class"]))}}),gs=m({__name:"TagsInputItemDelete",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const l=n,a=R(()=>{const{class:i,...o}=l;return o}),d=N(a);return(i,o)=>(r(),c(e(Ee),C(e(d),{class:e(b)("flex rounded bg-transparent mr-1",l.class)}),{default:t(()=>[$(i.$slots,"default",{},()=>[s(e(Se),{class:"w-4 h-4"})])]),_:3},16,["class"]))}}),vs=m({__name:"TagsInputItemText",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const l=n,a=R(()=>{const{class:i,...o}=l;return o}),d=N(a);return(i,o)=>(r(),c(e(Le),C(e(d),{class:e(b)("py-1 px-2 text-sm rounded bg-transparent",l.class)}),null,16,["class"]))}}),xs=m({name:"StartingForm",__name:"starting-form",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(n,{expose:l}){const a=Pe(n,"modelValue");return l({validate:()=>!0}),(i,o)=>(r(),p("div",{class:y(e(b)("starting-form",i.$attrs.class??""))},[s(e(I),{label:"分队"},{default:t(()=>[s(e(W),{modelValue:a.value.squad,"onUpdate:modelValue":o[0]||(o[0]=f=>a.value.squad=f),type:"text",placeholder:"输入开局分队"},null,8,["modelValue"])]),_:1}),s(e(I),{label:"干员"},{default:t(()=>[s(e(ps),{modelValue:a.value.pickup,"onUpdate:modelValue":o[1]||(o[1]=f=>a.value.pickup=f),class:"data-[focused]:outline-none data-[focused]:ring-2 data-[focused]:ring-ring data-[focused]:ring-offset-2"},{default:t(()=>[(r(!0),p(L,null,U(a.value.pickup,f=>(r(),c(e(_s),{key:f,value:f},{default:t(()=>[s(e(vs)),s(e(gs))]),_:2},1032,["value"]))),128)),s(e(ms),{class:"px-0 placeholder:text-muted-foreground",placeholder:"输入开局干员"})]),_:1},8,["modelValue"])]),_:1}),s(e(I),{label:"备注"},{default:t(()=>[s(e(fs),{modelValue:a.value.remark,"onUpdate:modelValue":o[2]||(o[2]=f=>a.value.remark=f),type:"text",placeholder:"输入备注"},null,8,["modelValue"])]),_:1})],2))}}),Y=m({__name:"Badge",props:{variant:{},class:{}},setup(n){const l=n;return(a,d)=>(r(),p("div",{class:y(e(b)(e(ys)({variant:a.variant}),l.class))},[$(a.$slots,"default")],2))}}),ys=Ie("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),bs={class:"pl-2.5 text-sm"},hs={class:"flex flex-1 flex-row overflow-x-auto"},ks={class:"pl-2.5 text-sm"},$s=m({name:"StartingList",__name:"starting-list",props:{starting:{type:Object,required:!0}},setup(n){return(l,a)=>(r(),p("div",{class:y(e(b)("starting-list",l.$attrs.class??""))},[s(e(I),{class:"flex-row",label:"分队"},{default:t(()=>[u("span",bs,h(n.starting.squad),1)]),_:1}),s(e(I),{class:"flex-row items-center",label:"干员"},{default:t(()=>[u("div",hs,[(r(!0),p(L,null,U(n.starting.pickup,d=>(r(),c(e(Y),{key:d,class:"cursor-pointer [&+&]:ml-1",variant:"outline"},{default:t(()=>[G(h(d),1)]),_:2},1024))),128))])]),_:1}),n.starting.remark?(r(),c(e(I),{key:0,class:"flex-row",label:"备注"},{default:t(()=>[u("span",ks,h(n.starting.remark),1)]),_:1})):V("",!0)],2))}}),ws={info(n,...l){console.info(`[${n}]`,...l)},error(n,...l){console.error(`[${n}]`,...l)}},Vs=m({__name:"ResizablePanelGroup",props:{id:{},autoSaveId:{},direction:{},keyboardResizeBy:{},storage:{},asChild:{type:Boolean},as:{},class:{}},emits:["layout"],setup(n,{emit:l}){const a=n,d=l,i=R(()=>{const{class:f,...v}=a;return v}),o=O(i,d);return(f,v)=>(r(),c(e(je),C(e(o),{class:e(b)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",a.class)}),{default:t(()=>[$(f.$slots,"default")]),_:3},16,["class"]))}}),Rs={key:0,class:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border"},Cs=m({__name:"ResizableHandle",props:{id:{},hitAreaMargins:{},tabindex:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{},withHandle:{type:Boolean}},emits:["dragging"],setup(n,{emit:l}){const a=n,d=l,i=R(()=>{const{class:f,...v}=a;return v}),o=O(i,d);return(f,v)=>(r(),c(e(Ue),C(e(o),{class:e(b)("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 [&[data-orientation=vertical]]:h-px [&[data-orientation=vertical]]:w-full [&[data-orientation=vertical]]:after:left-0 [&[data-orientation=vertical]]:after:h-1 [&[data-orientation=vertical]]:after:w-full [&[data-orientation=vertical]]:after:-translate-y-1/2 [&[data-orientation=vertical]]:after:translate-x-0 [&[data-orientation=vertical]>div]:rotate-90",a.class)}),{default:t(()=>[a.withHandle?(r(),p("div",Rs,[s(e(cs),{class:"h-2.5 w-2.5"})])):V("",!0)]),_:1},16,["class"]))}}),ke=m({__name:"Tabs",props:{defaultValue:{},orientation:{},dir:{},activationMode:{},modelValue:{},asChild:{type:Boolean},as:{}},emits:["update:modelValue"],setup(n,{emit:l}){const i=O(n,l);return(o,f)=>(r(),c(e(Oe),A(D(e(i))),{default:t(()=>[$(o.$slots,"default")]),_:3},16))}}),j=m({__name:"TabsContent",props:{value:{},forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const l=n,a=R(()=>{const{class:d,...i}=l;return i});return(d,i)=>(r(),c(e(Ne),C({class:e(b)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",l.class)},a.value),{default:t(()=>[$(d.$slots,"default")]),_:3},16,["class"]))}}),$e=m({__name:"TabsList",props:{loop:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const l=n,a=R(()=>{const{class:d,...i}=l;return i});return(d,i)=>(r(),c(e(Ae),C(a.value,{class:e(b)("inline-flex items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",l.class)}),{default:t(()=>[$(d.$slots,"default")]),_:3},16,["class"]))}}),Ts={class:"truncate"},F=m({__name:"TabsTrigger",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const l=n,a=R(()=>{const{class:i,...o}=l;return o}),d=N(a);return(i,o)=>(r(),c(e(De),C(e(d),{class:e(b)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",l.class)}),{default:t(()=>[u("span",Ts,[$(i.$slots,"default")])]),_:3},16,["class"]))}}),we=m({__name:"Collapsible",props:{defaultOpen:{type:Boolean},open:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["update:open"],setup(n,{emit:l}){const i=O(n,l);return(o,f)=>(r(),c(e(Me),A(D(e(i))),{default:t(({open:v})=>[$(o.$slots,"default",{open:v})]),_:3},16))}}),Ve=m({__name:"CollapsibleContent",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(n){const l=n;return(a,d)=>(r(),c(e(qe),C(l,{class:"overflow-hidden transition-all data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down"}),{default:t(()=>[$(a.$slots,"default")]),_:3},16))}}),Re=m({__name:"CollapsibleTrigger",props:{asChild:{type:Boolean},as:{}},setup(n){const l=n;return(a,d)=>(r(),c(e(Fe),A(D(l)),{default:t(()=>[$(a.$slots,"default")]),_:3},16))}}),Bs=m({__name:"HoverCard",props:{defaultOpen:{type:Boolean},open:{type:Boolean},openDelay:{},closeDelay:{}},emits:["update:open"],setup(n,{emit:l}){const i=O(n,l);return(o,f)=>(r(),c(e(Ge),A(D(e(i))),{default:t(()=>[$(o.$slots,"default")]),_:3},16))}}),zs=m({__name:"HoverCardContent",props:{forceMount:{type:Boolean},side:{},sideOffset:{default:4},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const l=n,a=R(()=>{const{class:i,...o}=l;return o}),d=N(a);return(i,o)=>(r(),c(e(He),null,{default:t(()=>[s(e(Ye),C(e(d),{class:e(b)("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",l.class)}),{default:t(()=>[$(i.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),Ss=m({__name:"HoverCardTrigger",props:{asChild:{type:Boolean},as:{}},setup(n){const l=n;return(a,d)=>(r(),c(e(Ke),A(D(l)),{default:t(()=>[$(a.$slots,"default")]),_:3},16))}}),Es={key:0,class:"mb-xs border-l-2 pl-xs text-sm italic"},Ls={class:"flex items-center justify-between gap-xs"},Ps=["href"],Is={class:"text-xs hover:cursor-pointer hover:underline hover:underline-offset-4"},js={key:0,class:"text-sm"},Us={class:"text-sm"},Os={key:1,class:"text-sm"},Ns=m({name:"RulesInfo",__name:"rules-info",props:{rules:{type:Object,required:!0},eventsUrl:{type:String}},setup(n){return(l,a)=>{const d=Ze("RouterLink");return r(),p("div",{class:y(e(b)("rules-info",l.$attrs.class??""))},[n.rules.brief?(r(),p("blockquote",Es,h(n.rules.brief),1)):V("",!0),u("div",Ls,[u("div",null,[n.rules.url?(r(),p("a",{key:0,target:"_blank",href:n.rules.url},[s(e(Y),{variant:"outline",class:"border-blue-400 bg-blue-100 text-blue-800 dark:bg-gray-700 dark:text-blue-400"},{default:t(()=>[s(e(k),{class:"size-4",icon:"mdi:link-variant"}),a[0]||(a[0]=u("span",{class:"ml-1"},"专题页",-1))]),_:1})],8,Ps)):V("",!0),n.eventsUrl?(r(),c(d,{key:1,class:"ml-xs",target:"_blank",to:n.eventsUrl},{default:t(()=>[s(e(Y),{variant:"outline",class:"border-green-400 bg-green-100 text-green-800 dark:bg-gray-700 dark:text-green-400"},{default:t(()=>[s(e(k),{class:"size-4",icon:"mdi:web-check"}),a[1]||(a[1]=u("span",{class:"ml-1"},"比赛页",-1))]),_:1})]),_:1},8,["to"])):V("",!0)]),s(e(Bs),null,{default:t(()=>[s(e(Ss),null,{default:t(()=>[u("div",Is,[u("code",null,"版本 v"+h(n.rules.version),1)])]),_:1}),s(e(zs),{class:"w-auto"},{default:t(()=>[n.rules.author?(r(),p("div",js,[a[2]||(a[2]=u("span",{class:"mr-1"},"规则作者",-1)),u("span",null,h(n.rules.author),1)])):V("",!0),u("div",Us,[a[3]||(a[3]=u("span",{class:"mr-1"},"引擎版本",-1)),u("code",null,h(n.rules.engineVersion),1)]),n.rules.changelog?(r(),p("div",Os,[a[4]||(a[4]=u("span",{class:"mr-1"},"更新日志",-1)),u("span",null,h(n.rules.changelog),1)])):V("",!0)]),_:1})]),_:1})])],2)}}}),As=m({name:"RulesLoader",__name:"rules-loader",emits:["update"],setup(n,{emit:l}){const a=l,d=x=>{a("update",x)},i=B(ne[0].value),o=B(pe.url),f=B(""),v=async x=>{const{files:g}=x.target;!g||g.length===0||console.log(g[0])},w=async x=>{try{const Z=await(await fetch(x)).json();d(Z)}catch(g){ws.error("LOADER","远程规则加载失败",g)}},P=async x=>{try{const _=await(await fetch(x)).json();d(_)}catch{me({title:"预设规则加载失败",description:"请检查网络连接或稍后再试",variant:"destructive",action:_e(xe,{altText:"刷新",onClick:()=>P(x)},{default:()=>"刷新"})})}};return(x,g)=>(r(),c(e(ke),{class:y(e(b)("rules-loader p-1",x.$attrs.class??"")),modelValue:i.value,"onUpdate:modelValue":g[2]||(g[2]=_=>i.value=_),"default-value":i.value},{default:t(()=>[s(e($e),{class:"w-full"},{default:t(()=>[(r(!0),p(L,null,U(e(ne),_=>(r(),c(e(F),{class:"w-1/3",value:_.value},{default:t(()=>[G(h(_.label),1)]),_:2},1032,["value"]))),256))]),_:1}),u("div",null,[s(e(j),{value:e(q).PRESET},{default:t(()=>[s(e(ls),{modelValue:o.value,"onUpdate:modelValue":[g[0]||(g[0]=_=>o.value=_),P],"default-value":o.value},{default:t(()=>[s(e(ns),null,{default:t(()=>[s(e(os),{class:"truncate",placeholder:"选择预设规则"})]),_:1}),s(e(rs),null,{default:t(()=>[(r(!0),p(L,null,U(e(Je),_=>(r(),c(e(is),{value:_.url},{default:t(()=>[G(h(_.name),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:1},8,["modelValue","default-value"])]),_:1},8,["value"]),s(e(j),{value:e(q).LOCAL},{default:t(()=>[s(e(W),{type:"file",accept:".json",placeholder:"点击上传规则文件",onChange:v})]),_:1},8,["value"]),s(e(j),{value:e(q).REMOTE},{default:t(()=>[s(e(W),{type:"url",placeholder:"规则文件的 URL",modelValue:f.value,"onUpdate:modelValue":g[1]||(g[1]=_=>f.value=_),onBlur:w,onKeydown:Qe(w,["enter"])},null,8,["modelValue"])]),_:1},8,["value"])])]),_:1},8,["class","modelValue","default-value"]))}}),Ds={class:"flex-1 truncate text-left"},Ms=["title"],qs={class:"mt-xs flex flex-col"},oe=m({name:"ScoringRules",__name:"component",setup(n){const l=B(!0),a=B(!1),d=x=>{a.value||(l.value=x)},i=B(null),o=()=>{a.value?(a.value=!1,i.value&&(ae(i.value),i.value=null)):(a.value=!0,l.value||(l.value=!0))},f=x=>{i.value=x},v=ye(),{rulesJSON:w}=We(v),P=R(()=>"");return Xe(async()=>{const x=new URL(pe.url,window.location.href).toString();try{const _=await(await fetch(x)).json();ae(_),v.rulesURL=x}catch{me({title:"默认规则加载失败",description:"请检查网络连接或稍后再试",variant:"destructive",action:_e(xe,{altText:"刷新页面",onClick:()=>window.location.reload()},{default:()=>"刷新页面"})})}}),(x,g)=>(r(),p("div",{class:y(e(b)("scoring-rules",x.$attrs.class??""))},[s(e(we),{open:l.value,"onUpdate:open":d},{default:t(()=>[s(e(Re),{class:"flex w-full items-center"},{default:t(()=>[u("div",Ds,[u("span",{class:"text-xl font-semibold",title:a.value?"":e(w).name},h(a.value?"切换赛事规则":e(w).name),9,Ms)]),s(e(z),null,{default:t(()=>[s(e(S),null,{default:t(()=>[s(e(T),{size:"xs",variant:"ghost",onClick:M(o,["stop"])},{default:t(()=>[a.value?(r(),c(e(k),{key:0,class:"size-4",icon:"mdi:check-all"})):(r(),c(e(k),{key:1,class:"size-4",icon:"mdi:pencil-outline"}))]),_:1})]),_:1}),s(e(E),null,{default:t(()=>[u("span",null,h(a.value?"更新":"编辑"),1)]),_:1})]),_:1})]),_:1}),s(e(Ve),null,{default:t(()=>[u("div",qs,[(r(),c(es,null,[a.value?(r(),c(As,{key:0,onUpdate:f})):(r(),c(Ns,{key:1,class:y(e(K)),rules:e(w),"events-url":P.value},null,8,["class","rules","events-url"]))],1024))])]),_:1})]),_:1},8,["open"])],2))}}),Fs={key:2,class:"flex flex-col items-center"},re=m({name:"ScoringStarting",__name:"component",setup(n){const l=B(!1),a=()=>{l.value=!l.value},d=B(!1),i=ss("formRef"),o=B(!0),f=g=>{d.value||(o.value=g)},v=ye(),w=B(ds),P=()=>{d.value=!1},x=()=>{var g;if(d.value){if(!((g=i.value)!=null&&g.validate()))return;us({starting:w.value}),d.value=!1}else o.value||(o.value=!0),v.starting&&(w.value={...w.value,...v.starting}),d.value=!0};return(g,_)=>(r(),p("div",{class:y(e(b)("scoring-starting",g.$attrs.class??""))},[s(e(we),{open:o.value,"onUpdate:open":f},{default:t(()=>[s(e(Re),{class:"flex w-full items-center"},{default:t(()=>[_[3]||(_[3]=u("div",{class:"flex-1 truncate text-left"},[u("span",{class:"text-xl font-semibold"},"初始构建")],-1)),s(e(z),null,{default:t(()=>[s(e(S),null,{default:t(()=>[s(e(T),{size:"xs",variant:"ghost",onClick:M(a,["stop"])},{default:t(()=>[s(e(k),{class:"size-4",icon:"mdi:timer-outline"})]),_:1})]),_:1}),s(e(E),null,{default:t(()=>_[1]||(_[1]=[u("span",null,"启用计时",-1)])),_:1})]),_:1}),d.value?(r(),c(e(z),{key:0},{default:t(()=>[s(e(S),null,{default:t(()=>[s(e(T),{size:"xs",variant:"ghost",onClick:M(P,["stop"])},{default:t(()=>[s(e(k),{class:"size-4",icon:"mdi:close"})]),_:1})]),_:1}),s(e(E),null,{default:t(()=>_[2]||(_[2]=[u("span",null,"取消",-1)])),_:1})]),_:1})):V("",!0),s(e(z),null,{default:t(()=>[s(e(S),null,{default:t(()=>[s(e(T),{size:"xs",variant:"ghost",onClick:M(x,["stop"])},{default:t(()=>[d.value?(r(),c(e(k),{key:0,class:"size-4",icon:"mdi:check-all"})):(r(),c(e(k),{key:1,class:"size-4",icon:"mdi:pencil-outline"}))]),_:1})]),_:1}),s(e(E),null,{default:t(()=>[u("span",null,h(d.value?"更新":"编辑"),1)]),_:1})]),_:1})]),_:1}),s(e(Ve),null,{default:t(()=>[u("div",{class:y(["mt-xs flex flex-col",e(K)])},[l.value?(r(),p(L,{key:0},[],64)):V("",!0),d.value?(r(),c(e(xs),{key:1,modelValue:w.value,"onUpdate:modelValue":_[0]||(_[0]=Z=>w.value=Z),ref_key:"formRef",ref:i},null,8,["modelValue"])):e(v).starting?(r(),c(e($s),{key:3,starting:e(v).starting},null,8,["starting"])):(r(),p("div",Fs,[s(e(T),{variant:"secondary",size:"sm",class:"font-normal",onClick:x},{default:t(()=>[s(e(k),{class:"size-5",icon:"mdi:text-box-edit-outline"}),_[4]||(_[4]=u("span",{class:"ml-2"},"填写内容",-1))]),_:1})]))],2)]),_:1})]),_:1},8,["open"])],2))}}),Gs={class:"h-full"},Hs={key:0,class:"flex min-h-[70vh] flex-row items-center justify-center text-gray-500"},Ys={key:1,class:"relative flex h-full flex-col"},Ks={class:"flex-1 px-sm pb-1"},Zs={class:"text-sm"},Js={class:"text-sm"},Qs={class:y(["sticky bottom-0 left-0 right-0","flex h-12 flex-row items-center justify-between px-sm","border-t bg-background/60 backdrop-blur-lg"])},Ws={class:"flex flex-row items-center"},Xs={class:"font-bold"},et=m({name:"ScoringRecorderSm",__name:"scoring-recorder-sm",setup(n){const l=X(),a=()=>{be()},d=()=>{he()};return(i,o)=>(r(),p("div",Gs,[e(l).details.length?(r(),p("div",Ys,[s(e(H),null,{default:t(()=>[u("div",Ks,[(r(!0),p(L,null,U(e(l).details,f=>(r(),p("div",{class:y(["flex flex-row items-center justify-between py-1",e(K)])},[u("span",Zs,h(f.label),1),u("span",Js,h(f.score),1)],2))),256))])]),_:1}),u("div",Qs,[u("div",null,[s(e(T),{size:"sm",variant:"secondary",class:"bg-secondary/60",onClick:d},{default:t(()=>[s(e(k),{class:"size-4",icon:"mdi:export-variant"})]),_:1}),s(e(T),{size:"sm",variant:"secondary",class:"ml-2 bg-secondary/60",onClick:a},{default:t(()=>[s(e(k),{class:"size-4",icon:"mdi:notification-clear-all"})]),_:1})]),u("div",Ws,[s(e(k),{class:"size-4",icon:"mdi:summation"}),o[1]||(o[1]=u("span",{class:"mr-sm text-sm"},"总分",-1)),u("span",Xs,h(e(l).score),1)])])])):(r(),p("div",Hs,[s(e(k),{class:"size-5",icon:"mdi:clipboard-text-play-outline"}),o[0]||(o[0]=u("span",{class:"ml-2 text-sm"},"暂无记录",-1))]))]))}}),st={class:"flex flex-row items-center justify-between"},tt={class:"min-h-0 flex-1"},at={key:0,class:"my-sm flex flex-row items-center justify-center text-gray-500"},lt={key:1,class:"relative flex h-full flex-col"},nt={class:"flex-1 pb-12 pr-sm"},ot={class:"text-sm"},rt={class:"text-sm"},it={class:y(["absolute bottom-0 left-0 right-0","flex h-12 flex-row items-center justify-between pr-sm","border-t bg-background/60 backdrop-blur-lg"])},ut={class:"flex flex-row items-center"},dt={class:"font-bold"},ct=m({name:"ScoringRecorderLg",__name:"scoring-recorder-lg",setup(n){const l=X(),a=()=>{be()},d=()=>{he()};return(i,o)=>(r(),p(L,null,[u("div",st,[o[6]||(o[6]=u("div",{class:"flex-1 text-left"},[u("span",{class:"text-xl font-semibold"},"得分记录")],-1)),s(e(z),null,{default:t(()=>[s(e(S),null,{default:t(()=>[s(e(T),{size:"xs",variant:"ghost",onClick:o[0]||(o[0]=()=>{})},{default:t(()=>[s(e(k),{class:"size-4",icon:"mdi:calculator"})]),_:1})]),_:1}),s(e(E),null,{default:t(()=>o[2]||(o[2]=[u("span",null,"计算器",-1)])),_:1})]),_:1}),e(l).details.length?(r(),c(e(z),{key:0},{default:t(()=>[s(e(S),null,{default:t(()=>[s(e(T),{size:"xs",variant:"ghost",onClick:o[1]||(o[1]=()=>{})},{default:t(()=>[s(e(k),{class:"size-4",icon:"mdi:content-save-outline"})]),_:1})]),_:1}),s(e(E),null,{default:t(()=>o[3]||(o[3]=[u("span",null,"保存记录",-1)])),_:1})]),_:1})):V("",!0),e(l).details.length?(r(),c(e(z),{key:1},{default:t(()=>[s(e(S),null,{default:t(()=>[s(e(T),{size:"xs",variant:"ghost",onClick:d},{default:t(()=>[s(e(k),{class:"size-4",icon:"mdi:export-variant"})]),_:1})]),_:1}),s(e(E),null,{default:t(()=>o[4]||(o[4]=[u("span",null,"导出记录",-1)])),_:1})]),_:1})):V("",!0),s(e(z),null,{default:t(()=>[s(e(S),null,{default:t(()=>[s(e(T),{size:"xs",variant:"ghost",onClick:a},{default:t(()=>[s(e(k),{class:"size-4",icon:"mdi:notification-clear-all"})]),_:1})]),_:1}),s(e(E),null,{default:t(()=>o[5]||(o[5]=[u("span",null,"清空记录",-1)])),_:1})]),_:1})]),u("div",tt,[e(l).details.length?(r(),p("div",lt,[s(e(H),null,{default:t(()=>[u("div",nt,[(r(!0),p(L,null,U(e(l).details,f=>(r(),p("div",{class:y(["flex flex-row items-center justify-between py-1",e(K)])},[u("span",ot,h(f.label),1),u("span",rt,h(f.score),1)],2))),256))])]),_:1}),u("div",it,[u("div",ut,[s(e(k),{class:"size-5",icon:"mdi:summation"}),o[8]||(o[8]=u("span",{class:"ml-1"},"总分",-1))]),u("span",dt,h(e(l).score),1)])])):(r(),p("div",at,[s(e(k),{class:"size-5",icon:"mdi:clipboard-text-play-outline"}),o[7]||(o[7]=u("span",{class:"ml-2 text-sm"},"暂无记录",-1))]))])],64))}}),ie=m({name:"ScoringRecorder",__name:"component",setup(n){const l=ge(ve);return(a,d)=>(r(),p("div",{class:y(e(b)("scoring-recorder flex min-h-0 flex-col",a.$attrs.class??""))},[e(l)?(r(),c(et,{key:0})):(r(),c(ct,{key:1}))],2))}}),ft={class:"flex items-center"},pt={class:"flex h-full flex-col before:mt-14 md:pt-sm lg:pt-md"},gt=m({name:"Points",__name:"points",setup(n){const l=ge(ve),a=X();return(d,i)=>(r(),p("div",{class:y(e(b)("aks-points size-full",d.$attrs.class??""))},[e(l)?(r(),c(e(ke),{key:0,"default-value":"rules",class:"flex size-full flex-col"},{default:t(()=>[u("div",{class:y(["w-full pt-xs",e(J),e(ee),e(ts)])},[s(e($e),{class:"mt-14 w-full"},{default:t(()=>[s(e(F),{class:"w-1/3",value:"rules"},{default:t(()=>i[0]||(i[0]=[u("span",null,"赛事规则",-1)])),_:1}),s(e(F),{class:"w-1/3",value:"scoring"},{default:t(()=>i[1]||(i[1]=[u("span",null,"计分板",-1)])),_:1}),s(e(F),{class:"w-1/3",value:"records"},{default:t(()=>[u("div",ft,[i[2]||(i[2]=u("span",null,"得分",-1)),e(a).score?(r(),c(e(Y),{key:0,variant:"default",class:"-my-1 scale-75"},{default:t(()=>[G(h(e(a).score),1)]),_:1})):V("",!0)])]),_:1})]),_:1})],2),u("div",{class:y([e(J),"min-h-0 flex-1"])},[s(e(H),{class:"h-full"},{default:t(()=>[s(e(j),{value:"rules",class:"px-sm"},{default:t(()=>[s(e(oe)),s(e(Q),{class:"my-xs"}),s(e(re))]),_:1}),s(e(j),{value:"scoring"},{default:t(()=>[s(e(le),{class:y(["px-sm pb-xs"])})]),_:1}),s(e(j),{value:"records"},{default:t(()=>[s(e(ie))]),_:1})]),_:1})],2)]),_:1})):(r(),c(e(Vs),{key:1,direction:"horizontal",class:y([e(J),e(ee),e(se),e(as)])},{default:t(()=>[s(e(te),null,{default:t(()=>[s(e(H),{class:"h-full [&>:first-child]:pt-14"},{default:t(()=>[s(e(le),{class:y(["md:py-sm lg:py-md xl:py-lg","md:pr-sm lg:pr-md xl:pr-lg",e(se)])},null,8,["class"])]),_:1})]),_:1}),s(e(Cs),{class:"md:mr-sm lg:mr-md"}),s(e(te),{class:"min-w-[256px] max-w-[378px]","default-size":24},{default:t(()=>[u("div",pt,[s(e(oe)),s(e(Q),{class:"my-xs"}),s(e(re)),s(e(Q),{class:"my-xs"}),s(e(ie))])]),_:1})]),_:1},8,["class"]))],2))}});export{gt as default};
