import{c as Ae,d as _,u as xe,w as be,v as ye,a as e,b as m,n as p,e as g,i as he,o as a,f as E,S as A,g as d,E as De,m as T,h as t,r as $,O as D,P as Me,D as qe,j as s,X as Fe,B as Ge,$ as Ye,k as He,_ as k,F as S,l as N,p as Ke,q as y,s as c,t as x,x as M,y as Je,z as te,A as le,Z as Ze,Y as Qe,C as H,G as L,M as K,H as We,I as Xe,J as es,K as ss,L as ts,N as ls,Q as W,R as as,T as X,U as ke,V as ns,W as os,a0 as b,a1 as ee,a2 as $e,a3 as V,a4 as rs,a5 as is,a6 as us,a7 as cs,a8 as ds,a9 as fs,aa as ps,ab as z,ac as B,ad as I,ae as q,af as P,ag as ms,ah as Q,ai as ue,aj as _s,ak as ce,al as de,am as vs}from"./index-B_Xfg7SQ.js";import{_ as we,a as Re,b as Le,c as Ve,d as gs,e as xs,f as bs,g as ys,h as Se,i as hs,u as J,j as fe,k as ks,D as $s,l as ae,m as Y,n as Ee,o as Te,p as pe}from"./component.vue_vue_type_script_setup_true_lang-D-UfNFCQ.js";/**
 * @license lucide-vue-next v0.451.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=Ae("GripVerticalIcon",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var F=(n=>(n.PRESET="preset",n.LOCAL="local",n.REMOTE="remote",n))(F||{});const me=[{label:"预设规则",value:"preset"},{label:"本地加载",value:"local"},{label:"远程链接",value:"remote"}],ne=_({__name:"Input",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(n,{emit:o}){const l=n,r=xe(l,"modelValue",o,{passive:!0,defaultValue:l.defaultValue});return(u,f)=>be((a(),m("input",{"onUpdate:modelValue":f[0]||(f[0]=v=>he(r)?r.value=v:null),class:p(e(g)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l.class))},null,2)),[[ye,e(r)]])}}),Rs=_({__name:"Textarea",props:{class:{},defaultValue:{},modelValue:{}},emits:["update:modelValue"],setup(n,{emit:o}){const l=n,r=xe(l,"modelValue",o,{passive:!0,defaultValue:l.defaultValue});return(u,f)=>be((a(),m("textarea",{"onUpdate:modelValue":f[0]||(f[0]=v=>he(r)?r.value=v:null),class:p(e(g)("flex min-h-14 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l.class))},null,2)),[[ye,e(r)]])}}),Ls=_({__name:"TagsInput",props:{modelValue:{},defaultValue:{},addOnPaste:{type:Boolean},addOnTab:{type:Boolean},addOnBlur:{type:Boolean},duplicate:{type:Boolean},disabled:{type:Boolean},delimiter:{},dir:{},max:{},required:{type:Boolean},name:{},id:{},convertValue:{type:Function},displayValue:{type:Function},asChild:{type:Boolean},as:{},class:{}},emits:["update:modelValue","invalid"],setup(n,{emit:o}){const l=n,i=o,r=E(()=>{const{class:f,...v}=l;return v}),u=A(r,i);return(f,v)=>(a(),d(e(De),T(e(u),{class:e(g)("flex flex-wrap gap-2 items-center rounded-md border border-input bg-background px-3 py-2 text-sm",l.class)}),{default:t(()=>[$(f.$slots,"default")]),_:3},16,["class"]))}}),Vs=_({__name:"TagsInputInput",props:{placeholder:{},autoFocus:{type:Boolean},maxLength:{},asChild:{type:Boolean},as:{},class:{}},setup(n){const o=n,l=E(()=>{const{class:r,...u}=o;return u}),i=D(l);return(r,u)=>(a(),d(e(Me),T(e(i),{class:e(g)("text-sm min-h-6 focus:outline-none flex-1 bg-transparent px-1",o.class)}),null,16,["class"]))}}),Ss=_({__name:"TagsInputItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const o=n,l=E(()=>{const{class:r,...u}=o;return u}),i=D(l);return(r,u)=>(a(),d(e(qe),T(e(i),{class:e(g)("flex h-6 items-center rounded bg-secondary data-[state=active]:ring-ring data-[state=active]:ring-2 data-[state=active]:ring-offset-2 ring-offset-background",o.class)}),{default:t(()=>[$(r.$slots,"default")]),_:3},16,["class"]))}}),Es=_({__name:"TagsInputItemDelete",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const o=n,l=E(()=>{const{class:r,...u}=o;return u}),i=D(l);return(r,u)=>(a(),d(e(Ge),T(e(i),{class:e(g)("flex rounded bg-transparent mr-1",o.class)}),{default:t(()=>[$(r.$slots,"default",{},()=>[s(e(Fe),{class:"w-4 h-4"})])]),_:3},16,["class"]))}}),Ts=_({__name:"TagsInputItemText",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const o=n,l=E(()=>{const{class:r,...u}=o;return u}),i=D(l);return(r,u)=>(a(),d(e(Ye),T(e(i),{class:e(g)("py-1 px-2 text-sm rounded bg-transparent",o.class)}),null,16,["class"]))}}),Cs=_({name:"StartingForm",__name:"starting-form",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(n,{expose:o}){const l=He(n,"modelValue");return o({validate:()=>!0}),(r,u)=>(a(),m("div",{class:p(e(g)("starting-form",r.$attrs.class??""))},[s(e(k),{label:"分队"},{default:t(()=>[s(e(ne),{modelValue:l.value.squad,"onUpdate:modelValue":u[0]||(u[0]=f=>l.value.squad=f),type:"text",placeholder:"输入开局分队"},null,8,["modelValue"])]),_:1}),s(e(k),{label:"干员"},{default:t(()=>[s(e(Ls),{modelValue:l.value.pickup,"onUpdate:modelValue":u[1]||(u[1]=f=>l.value.pickup=f),class:"data-[focused]:outline-none data-[focused]:ring-2 data-[focused]:ring-ring data-[focused]:ring-offset-2"},{default:t(()=>[(a(!0),m(S,null,N(l.value.pickup,f=>(a(),d(e(Ss),{key:f,value:f},{default:t(()=>[s(e(Ts)),s(e(Es))]),_:2},1032,["value"]))),128)),s(e(Vs),{class:"px-0 placeholder:text-muted-foreground",placeholder:"输入开局干员"})]),_:1},8,["modelValue"])]),_:1}),s(e(k),{label:"备注"},{default:t(()=>[s(e(Rs),{modelValue:l.value.remark,"onUpdate:modelValue":u[2]||(u[2]=f=>l.value.remark=f),type:"text",placeholder:"输入备注"},null,8,["modelValue"])]),_:1})],2))}}),Z=_({__name:"Badge",props:{variant:{},class:{}},setup(n){const o=n;return(l,i)=>(a(),m("div",{class:p(e(g)(e(zs)({variant:l.variant}),o.class))},[$(l.$slots,"default")],2))}}),zs=Ke("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),Bs={class:"pl-2.5 text-sm"},Is={class:"flex flex-1 flex-row overflow-x-auto"},Ps={class:"pl-2.5 text-sm"},js=_({name:"StartingList",__name:"starting-list",props:{starting:{type:Object,required:!0}},setup(n){return(o,l)=>(a(),m("div",{class:p(e(g)("starting-list",o.$attrs.class??""))},[s(e(k),{class:"flex-row",label:"分队"},{default:t(()=>[c("span",Bs,x(n.starting.squad),1)]),_:1}),s(e(k),{class:"flex-row items-center",label:"干员"},{default:t(()=>[c("div",Is,[(a(!0),m(S,null,N(n.starting.pickup,i=>(a(),d(e(Z),{key:i,class:"cursor-pointer [&+&]:ml-1",variant:"outline"},{default:t(()=>[M(x(i),1)]),_:2},1024))),128))])]),_:1}),n.starting.remark?(a(),d(e(k),{key:0,class:"flex-row",label:"备注"},{default:t(()=>[c("span",Ps,x(n.starting.remark),1)]),_:1})):y("",!0)],2))}}),oe=_({__name:"Collapsible",props:{defaultOpen:{type:Boolean},open:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["update:open"],setup(n,{emit:o}){const r=A(n,o);return(u,f)=>(a(),d(e(Je),te(le(e(r))),{default:t(({open:v})=>[$(u.$slots,"default",{open:v})]),_:3},16))}}),re=_({__name:"CollapsibleContent",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(n){const o=n;return(l,i)=>(a(),d(e(Ze),T(o,{class:"overflow-hidden transition-all data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down"}),{default:t(()=>[$(l.$slots,"default")]),_:3},16))}}),ie=_({__name:"CollapsibleTrigger",props:{asChild:{type:Boolean},as:{}},setup(n){const o=n;return(l,i)=>(a(),d(e(Qe),te(le(o)),{default:t(()=>[$(l.$slots,"default")]),_:3},16))}}),Ns=_({name:"CollapsibleSlot",__name:"collapsible-slot",setup(n){const o=H(K),l=L(!0),i=r=>{l.value=r};return(r,u)=>e(o)?(a(),d(e(we),{key:0,class:p(e(g)("collapsible-slot",r.$attrs.class??""))},{default:t(()=>[s(e(Re),{class:"p-xs"},{default:t(()=>[s(e(Le),{class:"flex w-full items-center"},{default:t(()=>[$(r.$slots,"trigger",{isExpanded:l.value})]),_:3})]),_:3}),s(e(Ve),null,{default:t(()=>[$(r.$slots,"default",{isExpanded:l.value})]),_:3})]),_:3},8,["class"])):(a(),d(e(oe),{key:1,class:p(e(g)("collapsible-slot",r.$attrs.class??"")),open:l.value,"onUpdate:open":i},{default:t(()=>[s(e(ie),{class:"flex w-full items-center"},{default:t(()=>[$(r.$slots,"trigger",{isExpanded:l.value})]),_:3}),s(e(re),null,{default:t(()=>[$(r.$slots,"default",{isExpanded:l.value})]),_:3})]),_:3},8,["class","open"]))}}),Ce={info(n,...o){console.info(`[${n}]`,...o)},error(n,...o){console.error(`[${n}]`,...o)}},Os=_({__name:"ResizablePanelGroup",props:{id:{},autoSaveId:{},direction:{},keyboardResizeBy:{},storage:{},asChild:{type:Boolean},as:{},class:{}},emits:["layout"],setup(n,{emit:o}){const l=n,i=o,r=E(()=>{const{class:f,...v}=l;return v}),u=A(r,i);return(f,v)=>(a(),d(e(We),T(e(u),{class:e(g)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",l.class)}),{default:t(()=>[$(f.$slots,"default")]),_:3},16,["class"]))}}),Us={key:0,class:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border"},As=_({__name:"ResizableHandle",props:{id:{},hitAreaMargins:{},tabindex:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{},withHandle:{type:Boolean}},emits:["dragging"],setup(n,{emit:o}){const l=n,i=o,r=E(()=>{const{class:f,...v}=l;return v}),u=A(r,i);return(f,v)=>(a(),d(e(Xe),T(e(u),{class:e(g)("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 [&[data-orientation=vertical]]:h-px [&[data-orientation=vertical]]:w-full [&[data-orientation=vertical]]:after:left-0 [&[data-orientation=vertical]]:after:h-1 [&[data-orientation=vertical]]:after:w-full [&[data-orientation=vertical]]:after:-translate-y-1/2 [&[data-orientation=vertical]]:after:translate-x-0 [&[data-orientation=vertical]>div]:rotate-90",l.class)}),{default:t(()=>[l.withHandle?(a(),m("div",Us,[s(e(ws),{class:"h-2.5 w-2.5"})])):y("",!0)]),_:1},16,["class"]))}}),ze=_({__name:"Tabs",props:{defaultValue:{},orientation:{},dir:{},activationMode:{},modelValue:{},asChild:{type:Boolean},as:{}},emits:["update:modelValue"],setup(n,{emit:o}){const r=A(n,o);return(u,f)=>(a(),d(e(es),te(le(e(r))),{default:t(()=>[$(u.$slots,"default")]),_:3},16))}}),j=_({__name:"TabsContent",props:{value:{},forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const o=n,l=E(()=>{const{class:i,...r}=o;return r});return(i,r)=>(a(),d(e(ss),T({class:e(g)("ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",o.class)},l.value),{default:t(()=>[$(i.$slots,"default")]),_:3},16,["class"]))}}),Be=_({__name:"TabsList",props:{loop:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const o=n,l=E(()=>{const{class:i,...r}=o;return r});return(i,r)=>(a(),d(e(ts),T(l.value,{class:e(g)("inline-flex items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",o.class)}),{default:t(()=>[$(i.$slots,"default")]),_:3},16,["class"]))}}),Ds={class:"truncate"},G=_({__name:"TabsTrigger",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const o=n,l=E(()=>{const{class:r,...u}=o;return u}),i=D(l);return(r,u)=>(a(),d(e(ls),T(e(i),{class:e(g)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",o.class)}),{default:t(()=>[c("span",Ds,[$(r.$slots,"default")])]),_:3},16,["class"]))}}),Ms=_({name:"RulesLoaderLocal",__name:"rules-loader-local",emits:["load"],setup(n,{emit:o}){const l=async i=>{const{files:r}=i.target;!r||r.length===0||console.log(r[0])};return(i,r)=>(a(),d(e(ne),{class:p(e(g)("rules-loader-local",i.$attrs.class??"")),type:"file",accept:".json",placeholder:"点击上传规则文件",onChange:l},null,8,["class"]))}}),Ie=_({name:"RulesLoaderPreset",__name:"rules-loader-preset",emits:["load"],setup(n,{emit:o}){const l=o,i=L(W.url),r=async u=>{try{const v=await(await fetch(u)).json();l("load",v)}catch(f){Ce.error("LOADER","预设规则加载失败",f),X({title:"预设规则加载失败",description:"请检查网络连接或稍后再试",variant:"destructive",action:ke(Se,{altText:"刷新",onClick:()=>r(u)},{default:()=>"刷新"})})}};return(u,f)=>(a(),d(e(gs),{class:p(e(g)("rules-loader-preset",u.$attrs.class??"")),modelValue:i.value,"onUpdate:modelValue":[f[0]||(f[0]=v=>i.value=v),r],"default-value":i.value},{default:t(()=>[s(e(xs),null,{default:t(()=>[s(e(bs),{class:"truncate",placeholder:"选择预设规则"})]),_:1}),s(e(ys),null,{default:t(()=>[(a(!0),m(S,null,N(e(as),v=>(a(),d(e(hs),{value:v.url},{default:t(()=>[M(x(v.name),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:1},8,["class","modelValue","default-value"]))}}),qs=_({name:"RulesLoaderRemote",__name:"rules-loader-remote",emits:["load"],setup(n,{emit:o}){const l=o,i=L(""),r=async u=>{try{const R=await(await fetch(u)).json();l("load",R)}catch(f){Ce.error("LOADER","远程规则加载失败",f)}};return(u,f)=>(a(),d(e(ne),{class:p(e(g)("rules-loader-remote",u.$attrs.class??"")),type:"url",placeholder:"规则文件的 URL",modelValue:i.value,"onUpdate:modelValue":f[0]||(f[0]=v=>i.value=v),onBlur:r,onKeydown:ns(r,["enter"])},null,8,["class","modelValue"]))}});function Pe(){const n=J();return os(async()=>{const l=new URL(W.url,window.location.href).toString();try{const r=await(await fetch(l)).json();fe(r),n.rulesURL=l}catch{X({title:"默认规则加载失败",description:"请检查网络连接或稍后再试",variant:"destructive",action:ke(Se,{altText:"刷新页面",onClick:()=>window.location.reload()},{default:()=>"刷新页面"})})}}),{onLoadRules:l=>{fe(l),l.url||(l.url=W.url),X({title:"规则加载成功",description:"已应用新的规则集"})}}}const Fs=["href"],je=_({name:"BilibiliLink",__name:"bilibili-link",props:{href:{type:String,required:!1}},setup(n){return(o,l)=>n.href?(a(),m("a",{key:0,class:p(e(g)("bilibili-link",o.$attrs.class??"")),href:n.href,target:"_blank"},[s(e(Z),{variant:"outline",class:"border-pink-400 bg-pink-100 text-pink-800 dark:bg-gray-700 dark:text-pink-400"},{default:t(()=>[s(e(b),{class:"size-4",icon:"tabler:brand-bilibili"}),l[0]||(l[0]=c("span",{class:"ml-1"},"专题页",-1))]),_:1,__:[0]})],10,Fs)):y("",!0)}}),se=_({name:"EventsDescription",__name:"events-description",props:{brief:{type:String,required:!1}},setup(n){return(o,l)=>n.brief?(a(),m("blockquote",{key:0,class:p(e(g)("events-description border-l-4 pl-2 text-sm italic",o.$attrs.class??""))},x(n.brief),3)):y("",!0)}}),C="text-sm text-gray-600 dark:text-gray-400",Ne=_({name:"EventsRulesInfo",__name:"events-rules-info",props:{rules:{type:Object,required:!0},showSeparator:{type:Boolean,default:!0}},setup(n){return(o,l)=>(a(),m("div",{class:p(e(g)("rules-info",o.$attrs.class??""))},[n.rules.organizer?(a(),d(e(k),{key:0,class:"flex-row",label:"主办方"},{default:t(()=>[c("span",{class:p(C)},x(n.rules.organizer),1)]),_:1})):y("",!0),n.rules.contractor?(a(),d(e(k),{key:1,class:"flex-row",label:"承办方"},{default:t(()=>[c("span",{class:p(C)},x(n.rules.contractor),1)]),_:1})):y("",!0),n.rules.schedule?(a(),d(e(k),{key:2,class:"flex-row",label:"日程"},{default:t(()=>[c("span",{class:p(C)},x(n.rules.schedule),1)]),_:1})):y("",!0),n.rules.description?(a(),d(e(k),{key:3,class:"flex-row",label:"简介"},{default:t(()=>[c("span",{class:p([C,"whitespace-pre-line"])},x(n.rules.description),3)]),_:1})):y("",!0),n.showSeparator?(a(),d(e(ee),{key:4,class:"my-2"})):y("",!0),n.rules.author?(a(),d(e(k),{key:5,class:"flex-row",label:"规则作者"},{default:t(()=>[c("span",{class:p(C)},x(n.rules.author),1)]),_:1})):y("",!0),n.rules.version?(a(),d(e(k),{key:6,class:"flex-row",label:"规则版本"},{default:t(()=>[c("span",{class:p(C)},"v"+x(n.rules.version),1)]),_:1})):y("",!0),n.rules.changelog?(a(),d(e(k),{key:7,class:"flex-row",label:"版本日志"},{default:t(()=>[c("span",{class:p(C)},x(n.rules.changelog),1)]),_:1})):y("",!0)],2))}}),Gs=["title"],Oe=_({name:"EventsLabel",__name:"events-label",props:{label:{type:String,required:!1}},setup(n){return(o,l)=>(a(),m("div",{class:p(e(g)("events-label flex-1 truncate",o.$attrs.class??""))},[c("span",{class:"text-xl font-semibold",title:n.label},x(n.label),9,Gs)],2))}}),Ys={key:0,class:"text-xl font-semibold"},Hs={key:1,class:"flex flex-col gap-xs"},Ks={class:"text-sm"},Js={class:"text-sm"},Zs={class:"text-sm"},Qs={class:"flex items-center justify-between"},Ws={class:"flex items-center"},Xs=_({name:"ScoringRulesSm",__name:"scoring-rules-sm",setup(n){const o=J(),{rulesJSON:l}=$e(o),i=L(!1),r=()=>{i.value=!i.value},{onLoadRules:u}=Pe();return(f,v)=>(a(),d(e(we),null,{default:t(()=>[s(e(Re),{class:"p-xs"},{default:t(()=>[s(e(Le),{class:"flex justify-between"},{default:t(()=>[i.value?(a(),m("div",Ys,"切换赛事规则")):(a(),d(Oe,{key:1,label:e(l).name},null,8,["label"])),s(e(V),{size:"xs",variant:"ghost",onClick:r},{default:t(()=>[i.value?(a(),d(e(b),{key:0,class:"size-4",icon:"mdi:close"})):(a(),d(e(b),{key:1,class:"size-4",icon:"mdi:pencil-outline"}))]),_:1})]),_:1})]),_:1}),s(e(Ve),{class:"p-xs"},{default:t(()=>[i.value?(a(),d(e(Ie),{key:0,onLoad:e(u)},null,8,["onLoad"])):(a(),m("div",Hs,[s(se,{brief:e(l).brief},null,8,["brief"]),c("div",null,[e(l).organizer?(a(),d(e(k),{key:0,class:"flex-row",label:"主办方"},{default:t(()=>[c("span",Ks,x(e(l).organizer),1)]),_:1})):y("",!0),e(l).contractor?(a(),d(e(k),{key:1,class:"flex-row",label:"承办方"},{default:t(()=>[c("span",Js,x(e(l).contractor),1)]),_:1})):y("",!0),e(l).schedule?(a(),d(e(k),{key:2,class:"flex-row",label:"日程"},{default:t(()=>[c("span",Zs,x(e(l).schedule),1)]),_:1})):y("",!0)]),c("div",Qs,[s(je,{href:e(l).url},null,8,["href"]),s(e(rs),null,{default:t(()=>[s(e(is),null,{default:t(()=>[c("div",Ws,[s(e(b),{class:"size-4",icon:"mdi:dots-horizontal-circle-outline"}),v[0]||(v[0]=c("span",{class:"ml-1 text-xs"},"更多",-1))])]),_:1}),s(e(us),{side:"bottom",class:"sm:rounded-t-xl"},{default:t(()=>[s(e(cs),null,{default:t(()=>[s(e(ds),null,{default:t(()=>[M(x(e(l).name),1)]),_:1}),s(e(fs),null,{default:t(()=>[s(se,{brief:e(l).brief},null,8,["brief"])]),_:1})]),_:1}),s(Ne,{class:"mt-1",rules:e(l)},null,8,["rules"])]),_:1})]),_:1})])]))]),_:1})]),_:1}))}}),et=_({name:"EventsLink",__name:"events-link",props:{href:{type:String,required:!1}},setup(n){return(o,l)=>{const i=ps("RouterLink");return n.href?(a(),d(i,{key:0,class:p(e(g)("events-link",o.$attrs.class??"")),to:n.href,target:"_blank"},{default:t(()=>[s(e(Z),{variant:"outline",class:"border-green-400 bg-green-100 text-green-800 dark:bg-gray-700 dark:text-green-400"},{default:t(()=>[s(e(b),{class:"size-4",icon:"mdi:web-check"}),l[0]||(l[0]=c("span",{class:"ml-1"},"比赛页",-1))]),_:1,__:[0]})]),_:1},8,["class","to"])):y("",!0)}}}),st={key:0,class:"text-xl font-semibold"},tt={class:"mt-2"},lt={key:1},at={class:"flex"},nt=_({name:"ScoringRulesLg",__name:"scoring-rules-lg",setup(n){const o=J(),{rulesJSON:l}=$e(o),i=L(!1),r=L(!1),u=()=>{r.value=!r.value},f=U=>{r.value&&U.stopPropagation()},v=E(()=>""),R=L(me[0].value),{onLoadRules:O}=Pe();return(U,w)=>(a(),d(e(Ns),null,{trigger:t(()=>[c("div",{class:"flex flex-1 justify-between truncate text-left",onClick:f},[r.value?(a(),m("div",st,"切换赛事规则")):(a(),d(Oe,{key:1,label:e(l).name},null,8,["label"])),s(e(B),null,{default:t(()=>[s(e(I),null,{default:t(()=>[s(e(V),{size:"xs",variant:"ghost",onClick:q(u,["stop"])},{default:t(()=>[r.value?(a(),d(e(b),{key:0,class:"size-4",icon:"mdi:close"})):(a(),d(e(b),{key:1,class:"size-4",icon:"mdi:pencil-outline"}))]),_:1})]),_:1}),s(e(P),null,{default:t(()=>[c("span",null,x(r.value?"取消":"切换赛事规则"),1)]),_:1})]),_:1})])]),default:t(()=>[c("div",{class:p([e(z),"flex flex-col"])},[r.value?(a(),d(e(ze),{key:0,class:"mt-2 p-1",modelValue:R.value,"onUpdate:modelValue":w[0]||(w[0]=h=>R.value=h),"default-value":R.value},{default:t(()=>[s(e(Be),{class:"w-full"},{default:t(()=>[(a(!0),m(S,null,N(e(me),h=>(a(),d(e(G),{class:"w-1/3",value:h.value},{default:t(()=>[M(x(h.label),1)]),_:2},1032,["value"]))),256))]),_:1}),c("div",tt,[s(e(j),{value:e(F).PRESET},{default:t(()=>[s(e(Ie),{onLoad:e(O)},null,8,["onLoad"])]),_:1},8,["value"]),s(e(j),{value:e(F).LOCAL},{default:t(()=>[s(e(Ms),{onLoad:e(O)},null,8,["onLoad"])]),_:1},8,["value"]),s(e(j),{value:e(F).REMOTE},{default:t(()=>[s(e(qs),{onLoad:e(O)},null,8,["onLoad"])]),_:1},8,["value"])])]),_:1},8,["modelValue","default-value"])):(a(),m("div",lt,[s(se,{class:"my-xs",brief:e(l).brief},null,8,["brief"]),s(e(oe),{open:i.value,"onUpdate:open":w[1]||(w[1]=h=>i.value=h)},{default:t(()=>[s(e(re),null,{default:t(()=>[s(Ne,{class:"mb-xs","show-separator":!1,rules:e(l)},null,8,["rules"])]),_:1}),s(e(ie),{class:"flex w-full items-center justify-between"},{default:t(()=>[c("div",null,[s(je,{href:e(l).url},null,8,["href"]),v.value?(a(),d(et,{key:0,href:v.value,class:"ml-xs"},null,8,["href"])):y("",!0)]),c("div",at,[i.value?(a(),m(S,{key:0},[w[2]||(w[2]=c("span",{class:"text-xs"},"收起",-1)),s(e(b),{icon:"mdi:chevron-up"})],64)):(a(),m(S,{key:1},[w[3]||(w[3]=c("span",{class:"text-xs"},"展开",-1)),s(e(b),{icon:"mdi:chevron-down"})],64))])]),_:1})]),_:1},8,["open"])]))],2)]),_:1}))}}),_e=_({name:"ScoringRules",__name:"component",setup(n){const o=H(K);return(l,i)=>(a(),m("div",{class:p(e(g)("scoring-rules",l.$attrs.class??""))},[e(o)?(a(),d(Xs,{key:0})):(a(),d(nt,{key:1}))],2))}}),ot={key:2,class:"flex flex-col items-center"},ve=_({name:"ScoringStarting",__name:"component",setup(n){const o=L(!1),l=()=>{o.value=!o.value},i=L(!1),r=ms("formRef"),u=L(!0),f=w=>{i.value||(u.value=w)},v=J(),R=L($s),O=()=>{i.value=!1},U=()=>{var w;if(i.value){if(!((w=r.value)!=null&&w.validate()))return;ks({starting:R.value}),i.value=!1}else u.value||(u.value=!0),v.starting&&(R.value={...R.value,...v.starting}),i.value=!0};return(w,h)=>(a(),m("div",{class:p(e(g)("scoring-starting",w.$attrs.class??""))},[s(e(oe),{open:u.value,"onUpdate:open":f},{default:t(()=>[s(e(ie),{class:"flex w-full items-center"},{default:t(()=>[h[3]||(h[3]=c("div",{class:"flex-1 truncate text-left"},[c("span",{class:"text-xl font-semibold"},"初始构建")],-1)),s(e(B),null,{default:t(()=>[s(e(I),null,{default:t(()=>[s(e(V),{size:"xs",variant:"ghost",onClick:q(l,["stop"])},{default:t(()=>[s(e(b),{class:"size-4",icon:"mdi:timer-outline"})]),_:1})]),_:1}),s(e(P),null,{default:t(()=>h[1]||(h[1]=[c("span",null,"启用计时",-1)])),_:1,__:[1]})]),_:1}),i.value?(a(),d(e(B),{key:0},{default:t(()=>[s(e(I),null,{default:t(()=>[s(e(V),{size:"xs",variant:"ghost",onClick:q(O,["stop"])},{default:t(()=>[s(e(b),{class:"size-4",icon:"mdi:close"})]),_:1})]),_:1}),s(e(P),null,{default:t(()=>h[2]||(h[2]=[c("span",null,"取消",-1)])),_:1,__:[2]})]),_:1})):y("",!0),s(e(B),null,{default:t(()=>[s(e(I),null,{default:t(()=>[s(e(V),{size:"xs",variant:"ghost",onClick:q(U,["stop"])},{default:t(()=>[i.value?(a(),d(e(b),{key:0,class:"size-4",icon:"mdi:check-all"})):(a(),d(e(b),{key:1,class:"size-4",icon:"mdi:pencil-outline"}))]),_:1})]),_:1}),s(e(P),null,{default:t(()=>[c("span",null,x(i.value?"更新":"编辑"),1)]),_:1})]),_:1})]),_:1,__:[3]}),s(e(re),null,{default:t(()=>[c("div",{class:p(["mt-xs flex flex-col",e(z)])},[o.value?(a(),m(S,{key:0},[],64)):y("",!0),i.value?(a(),d(e(Cs),{key:1,modelValue:R.value,"onUpdate:modelValue":h[0]||(h[0]=Ue=>R.value=Ue),ref_key:"formRef",ref:r},null,8,["modelValue"])):e(v).starting?(a(),d(e(js),{key:3,starting:e(v).starting},null,8,["starting"])):(a(),m("div",ot,[s(e(V),{variant:"secondary",size:"sm",class:"font-normal",onClick:U},{default:t(()=>[s(e(b),{class:"size-5",icon:"mdi:text-box-edit-outline"}),h[4]||(h[4]=c("span",{class:"ml-2"},"填写内容",-1))]),_:1,__:[4]})]))],2)]),_:1})]),_:1},8,["open"])],2))}}),rt={class:"h-full"},it={key:0,class:"flex min-h-[70vh] flex-row items-center justify-center text-gray-500"},ut={key:1,class:"relative flex h-full flex-col"},ct={class:"flex-1 px-sm py-2"},dt={class:"text-sm"},ft={class:"text-sm"},pt={class:p(["sticky bottom-0 left-0 right-0","flex h-12 flex-row items-center justify-between px-sm","border-t bg-background/60 backdrop-blur-lg"])},mt={class:"flex flex-row items-center"},_t={class:"font-bold"},vt=_({name:"ScoringRecorderSm",__name:"scoring-recorder-sm",setup(n){const o=ae(),l=()=>{Ee()},i=()=>{Te()};return(r,u)=>(a(),m("div",rt,[e(o).details.length?(a(),m("div",ut,[s(e(Y),null,{default:t(()=>[c("div",ct,[(a(!0),m(S,null,N(e(o).details,f=>(a(),m("div",{class:p(["flex flex-row items-center justify-between py-1",e(z)])},[c("span",dt,x(f.label),1),c("span",ft,x(f.score),1)],2))),256))])]),_:1}),c("div",pt,[c("div",null,[s(e(V),{size:"sm",variant:"secondary",class:"bg-secondary/60",onClick:i},{default:t(()=>[s(e(b),{class:"size-4",icon:"mdi:export-variant"})]),_:1}),s(e(V),{size:"sm",variant:"secondary",class:"ml-2 bg-secondary/60",onClick:l},{default:t(()=>[s(e(b),{class:"size-4",icon:"mdi:clear-outline"})]),_:1})]),c("div",mt,[s(e(b),{class:"size-4",icon:"mdi:summation"}),u[1]||(u[1]=c("span",{class:"mr-sm text-sm"},"总分",-1)),c("span",_t,x(e(o).score),1)])])])):(a(),m("div",it,[s(e(b),{class:"size-5",icon:"mdi:clipboard-text-play-outline"}),u[0]||(u[0]=c("span",{class:"ml-2 text-sm"},"暂无记录",-1))]))]))}}),gt={class:"flex flex-row items-center justify-between"},xt={class:"min-h-0 flex-1"},bt={key:0,class:"my-sm flex flex-row items-center justify-center text-gray-500"},yt={key:1,class:"relative flex h-full flex-col"},ht={class:"flex-1 pb-12 pr-sm"},kt={class:"text-sm"},$t={class:"text-sm"},wt={class:p(["absolute bottom-0 left-0 right-0","flex h-11 flex-row items-center justify-between pr-sm","border-t bg-background/60 backdrop-blur-lg"])},Rt={class:"flex flex-row items-center"},Lt={class:"font-bold"},Vt=_({name:"ScoringRecorderLg",__name:"scoring-recorder-lg",setup(n){const o=ae(),l=()=>{Ee()},i=()=>{Te()};return(r,u)=>(a(),m(S,null,[c("div",gt,[u[4]||(u[4]=c("div",{class:"flex-1 text-left"},[c("span",{class:"text-xl font-semibold"},"得分记录")],-1)),e(o).details.length?(a(),m(S,{key:0},[s(e(B),null,{default:t(()=>[s(e(I),null,{default:t(()=>[s(e(V),{size:"xs",variant:"ghost",onClick:u[0]||(u[0]=()=>{})},{default:t(()=>[s(e(b),{class:"size-4",icon:"mdi:content-save-outline"})]),_:1})]),_:1}),s(e(P),null,{default:t(()=>u[1]||(u[1]=[c("span",null,"保存记录",-1)])),_:1,__:[1]})]),_:1}),s(e(B),null,{default:t(()=>[s(e(I),null,{default:t(()=>[s(e(V),{size:"xs",variant:"ghost",onClick:i},{default:t(()=>[s(e(b),{class:"size-4",icon:"mdi:export-variant"})]),_:1})]),_:1}),s(e(P),null,{default:t(()=>u[2]||(u[2]=[c("span",null,"导出记录",-1)])),_:1,__:[2]})]),_:1}),s(e(B),null,{default:t(()=>[s(e(I),null,{default:t(()=>[s(e(V),{size:"xs",variant:"ghost",onClick:l},{default:t(()=>[s(e(b),{class:"size-4",icon:"mdi:clear-outline"})]),_:1})]),_:1}),s(e(P),null,{default:t(()=>u[3]||(u[3]=[c("span",null,"清空记录",-1)])),_:1,__:[3]})]),_:1})],64)):y("",!0)]),c("div",xt,[e(o).details.length?(a(),m("div",yt,[s(e(Y),null,{default:t(()=>[c("div",ht,[(a(!0),m(S,null,N(e(o).details,f=>(a(),m("div",{class:p(["flex flex-row items-center justify-between py-1",e(z)])},[c("span",kt,x(f.label),1),c("span",$t,x(f.score),1)],2))),256))])]),_:1}),c("div",wt,[c("div",Rt,[s(e(b),{class:"size-5",icon:"mdi:summation"}),u[6]||(u[6]=c("span",{class:"ml-1"},"总分",-1))]),c("span",Lt,x(e(o).score),1)])])):(a(),m("div",bt,[s(e(b),{class:"size-5",icon:"mdi:clipboard-text-play-outline"}),u[5]||(u[5]=c("span",{class:"ml-2 text-sm"},"暂无记录",-1))]))])],64))}}),ge=_({name:"ScoringRecorder",__name:"component",setup(n){const o=H(K);return(l,i)=>(a(),m("div",{class:p(e(g)("scoring-recorder flex min-h-0 flex-col",l.$attrs.class??""))},[e(o)?(a(),d(vt,{key:0})):(a(),d(Vt,{key:1}))],2))}}),St={class:"flex items-center"},Et={class:"flex h-full flex-col before:mt-14 md:pt-sm lg:pt-md"},zt=_({name:"Points",__name:"points",setup(n){const o=H(K),l=ae();return(i,r)=>(a(),m("div",{class:p(e(g)("aks-points size-full",i.$attrs.class??""))},[e(o)?(a(),d(e(ze),{key:0,"default-value":"rules",class:"flex size-full flex-col"},{default:t(()=>[c("div",{class:p(["w-full pt-xs",e(Q),e(ue),e(_s)])},[s(e(Be),{class:"mt-14 w-full"},{default:t(()=>[s(e(G),{class:"w-1/3",value:"rules"},{default:t(()=>r[0]||(r[0]=[c("span",null,"赛事规则",-1)])),_:1,__:[0]}),s(e(G),{class:"w-1/3",value:"scoring"},{default:t(()=>r[1]||(r[1]=[c("span",null,"计分板",-1)])),_:1,__:[1]}),s(e(G),{class:"w-1/3",value:"records"},{default:t(()=>[c("div",St,[r[2]||(r[2]=c("span",null,"得分",-1)),e(l).score?(a(),d(e(Z),{key:0,variant:"default",class:"-my-1 scale-75"},{default:t(()=>[M(x(e(l).score),1)]),_:1})):y("",!0)])]),_:1})]),_:1})],2),c("div",{class:p([e(Q),"min-h-0 flex-1"])},[s(e(Y),{class:"h-full"},{default:t(()=>[s(e(j),{value:"rules"},{default:t(()=>[s(e(_e),{class:p(["px-sm pt-xs",e(z)])},null,8,["class"]),s(e(ve),{class:p(["px-sm py-xs",e(z)])},null,8,["class"])]),_:1}),s(e(j),{value:"scoring"},{default:t(()=>[s(e(pe),{class:"px-sm py-xs"})]),_:1}),s(e(j),{value:"records"},{default:t(()=>[s(e(ge),{class:p(e(z))},null,8,["class"])]),_:1})]),_:1})],2)]),_:1})):(a(),d(e(Os),{key:1,direction:"horizontal",class:p([e(Q),e(ue),e(ce),e(vs)])},{default:t(()=>[s(e(de),null,{default:t(()=>[s(e(Y),{class:"h-full [&>:first-child]:pt-14"},{default:t(()=>[s(e(pe),{class:p(["md:py-sm lg:py-md xl:py-lg","md:pr-sm lg:pr-md xl:pr-lg",e(ce)])},null,8,["class"])]),_:1})]),_:1}),s(e(As),{class:"md:mr-sm lg:mr-md"}),s(e(de),{class:"min-w-[256px] max-w-[378px]","default-size":24},{default:t(()=>[c("div",Et,[s(e(_e)),s(e(ee),{class:"my-xs"}),s(e(ve)),s(e(ee),{class:"my-xs"}),s(e(ge))])]),_:1})]),_:1},8,["class"]))],2))}});export{zt as default};
